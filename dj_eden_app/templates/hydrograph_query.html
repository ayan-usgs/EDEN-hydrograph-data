{% extends "base.html" %}

{% block title %}EDEN Timeseries Data{% endblock title %}

{% block content_header %} <h2>Exploring and Visualizing EDEN (EVE)</h2> {% endblock content_header %}

{% block script %}
	<script type="text/javascript"
	  src="{{ STATIC_URL }}js/dygraph-combined.js"></script>
	  
	<script type="text/javascript">
		  var g2 = new Dygraph(
		    document.getElementById("graph"),
		    "/static/data.csv", // path to CSV file
		    {
		    	visibility: [True]		
		    }          // options
		  );
	</script>

{% endblock script %}

{% block content %}
  
<div class="form_input_field">
	<form name="hydrograph_query" id=hydrograph_form method="GET" action=".">{% csrf_token %}
		{{ query_form.non_field_errors }}
		{{ query_form.field_errors }}
		<table>
			<tr>
				<p><label for="{{ query_form.timeseries_start.html_name }}"><b>Timeseries Start: </b></label>{{ query_form.timeseries_start }}</p>
			</tr>
			<tr>
				<p><label for="{{ query_form.timeseries_end.html_name }}"><b>Timeseries end: </b></label>{{ query_form.timeseries_end }}</p>
			</tr>
			<tr>
				<p><label for="{{ query_form.site_list.html_name }}"><b>Site List: </b></label>{{ query_form.site_list }}</p>
			</tr>
			
			<tr>
				<td>
					<input name="hydrograph_query" type="submit" value="Execute">	
				</td>
				<td>
					<a href="{% url timeseries_download %}">Download Data</a>
				</td>
			</tr>
		</table>
	</form>
</div>

{% if changed %}
	<div id="graph">
	</div>
{% else %}
	<p>Nothing to graph</p>
{% endif %}

		<script type="text/javascript">
  var g2 = new Dygraph(
    document.getElementById("graph"),
    "/static/data.csv", // path to CSV file
    {}          // options
  );
		</script>

{% endblock content %}