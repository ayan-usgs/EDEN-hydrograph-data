{% extends "base.html" %}

{% block title %}EDEN Timeseries Data{% endblock title %}

{% block content_header %} <h2>Exploring and Visualizing EDEN (EVE)</h2> {% endblock content_header %}

{% block script %}
	<script type="text/javascript"
	  src="{{ STATIC_URL }}js/dygraph-combined.js"></script>
	  
	<script type="text/javascript" src="{{ STATIC_URL }}js/dygraph-extra.js"></script>

{% endblock script %}

{% block content %}
  
<div class="form_input_field">
	<form name="hydrograph_query" id=hydrograph_form method="GET" action=".">{% csrf_token %}
		{{ query_form.non_field_errors }}
		{{ query_form.field_errors }}
		<table>
			<tr>
				<p><label for="{{ query_form.timeseries_start.html_name }}"><b>Timeseries Start: </b></label>{{ query_form.timeseries_start }}</p>
			</tr>
			<tr>
				<p><label for="{{ query_form.timeseries_end.html_name }}"><b>Timeseries end: </b></label>{{ query_form.timeseries_end }}</p>
			</tr>
			<tr>
				<p><label for="{{ query_form.site_list.html_name }}"><b>Site List: </b></label>{{ query_form.site_list }}</p>
			</tr>
			
			<tr>
				<td>
					<input name="hydrograph_query" type="submit" value="Execute">	
				</td>
		
				<td>
					<input name="download_query" type="submit" value="Download Data">
				</td>
			
			</tr>
		</table>
	</form>
</div>

	<div id="graph">
	   <p>Nothing to graph</p>
	</div>

	<script type="text/javascript">
		 var g2 = new Dygraph(
		   document.getElementById("graph"),
		   "{% url dj_eden_app.views.plot_data %}?gage=2A300&gage=L31NN&beginDate=2010-10-01&endDate=2011-01-01&maxCount=100", // path to CSV file
		   {
		   	ylabel: "Water Level (ft)",
		   	xlabel: "Date"
		   }          // options
		 );
	</script>
	
	<img id="eden_plot"/>
		

{% endblock content %}